@using Ouvidoria.Web.ViewModels.Registro
@model IEnumerable<RegistroViewModel>


<div class="d-flex w-100 h-100">
    <div style="max-height:300px;" class="align-self-end w-100">
        <div class="d-flex table_header">
            <div class="col">Data da denúncia</div>
            <div class="col">Data de atualização</div>
            <div class="col">Autor</div>
            <div class="col">Titulo</div>
            <div class="col">Status</div>
            <div class="col">Detalhes</div>
            <div class="col">Natureza</div>
            <div class="col">Responsável</div>
            <div class="col">Ações</div>
        </div>
        <div>
            @if (Model.Count() > 0)
            {
                foreach (RegistroViewModel rm in Model)
                {
                    string descricao = @rm.Descricao;
                    char aux = '0';
                    if (descricao.Length > 50)
                        for (int i = 50; i >= 0; i--)
                        {
                            aux = descricao.ElementAt(i);
                            if (aux == ' ')
                            {
                                descricao = descricao.Substring(0, 50);
                                descricao += "...";
                                break;
                            }
                        }
                    <div class="d-flex table_row">
                        <div style="height:100px" class="col overflow-hidden">@rm.DataCriacao</div>
                        <div style="height:100px" class="col overflow-hidden">@rm.DataAtualizacao</div>
                        <div style="height:100px" class="col overflow-hidden">@rm.Autor</div>
                        <div style="height:100px" class="col overflow-hidden">@rm.Titulo</div>
                        <div style="height:100px" class="col overflow-hidden">@rm.Status</div>
                        <div style="height:100px" class="col overflow-hidden">@descricao</div>
                        <div style="height:100px" class="col overflow-hidden">@rm.TipoRegistro</div>
                        <div style="height:100px" class="col overflow-hidden">@rm.Responsavel</div>
                        <div style="height:100px" class="col overflow-hidden"><a asp-action="Registro"
                                asp-controller="Administrador" asp-route-id=@rm.Id><img width=25 height=25
                                    src="~/svg/circle-info-solid.svg" /></a></div>
                    </div>
                }
            }
            else
            {
                <div class="table_row">
                    <h1 class="text-center">Não há registros</h1>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {

}

@section Styles {

    <style>
        .table_header {
            background-color: #555;
            color: white;
            padding: 10px;
            border-radius: 20px 20px 0 0;
            border: 5px solid #b3dec1;
            border-bottom: none;
        }

        .table_header>div {
            text-align: center;
        }


        .table_row {
            border: 5px solid #b3dec1;
            border-top: none;
            border-bottom: none;
            padding: 10px 0;
        }

        .table_row>div {
            text-align: center;
        }

        .table_row:nth-child(even) {
            background-color: #999;
        }

        .table_row:nth-child(odd) {
            background-color: #aaa;
        }
    </style>
}